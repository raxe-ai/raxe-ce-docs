---
title: "Raxe Client"
description: "Core scanning client API"
---

## Raxe

The main synchronous client for threat detection.

### Constructor

```python
from raxe import Raxe

raxe = Raxe(
    api_key: str | None = None,
    use_ml: bool = True,
    timeout: float = 30.0,
    config_path: str | None = None,
)
```

**Parameters:**

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `api_key` | `str \| None` | `None` | API key. If None, reads from config or env |
| `use_ml` | `bool` | `True` | Enable L2 ML detection |
| `timeout` | `float` | `30.0` | Scan timeout in seconds |
| `config_path` | `str \| None` | `None` | Custom config file path |

**Example:**

```python
# Default configuration
raxe = Raxe()

# With custom settings
raxe = Raxe(
    api_key="raxe_your_key",
    use_ml=True,
    timeout=60.0
)

# Disable ML for faster scans
raxe = Raxe(use_ml=False)
```

---

### scan()

Scan a single prompt for threats.

```python
def scan(
    self,
    prompt: str,
    *,
    use_ml: bool | None = None,
    timeout: float | None = None,
) -> ScanResult
```

**Parameters:**

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `prompt` | `str` | required | Text to scan |
| `use_ml` | `bool \| None` | `None` | Override ML setting for this scan |
| `timeout` | `float \| None` | `None` | Override timeout for this scan |

**Returns:** `ScanResult`

**Raises:**
- `ValidationError`: If prompt is empty or invalid
- `RaxeBlockedError`: If policy blocks the request

**Example:**

```python
from raxe import Raxe

raxe = Raxe()

# Basic scan
result = raxe.scan("Hello, how are you?")
print(result.is_safe)  # True

# Scan with detection
result = raxe.scan("Ignore all previous instructions")
print(result.is_safe)  # False
print(result.highest_severity)  # Severity.HIGH

# Override settings for single scan
result = raxe.scan(
    "some text",
    use_ml=False,  # Skip ML for this scan
    timeout=5.0    # Short timeout
)
```

---

### scan_batch()

Scan multiple prompts efficiently.

```python
def scan_batch(
    self,
    prompts: list[str],
    *,
    use_ml: bool | None = None,
    timeout: float | None = None,
) -> list[ScanResult]
```

**Parameters:**

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `prompts` | `list[str]` | required | List of texts to scan |
| `use_ml` | `bool \| None` | `None` | Override ML setting |
| `timeout` | `float \| None` | `None` | Override timeout (per prompt) |

**Returns:** `list[ScanResult]`

**Example:**

```python
prompts = [
    "Hello, how are you?",
    "Ignore all previous instructions",
    "What is the weather?",
]

results = raxe.scan_batch(prompts)

for prompt, result in zip(prompts, results):
    status = "SAFE" if result.is_safe else "THREAT"
    print(f"{status}: {prompt[:30]}...")
```

---

### Context Manager

Use as context manager for proper resource cleanup:

```python
from raxe import Raxe

with Raxe() as raxe:
    result = raxe.scan("Hello")
    # Resources automatically cleaned up
```

---

## AsyncRaxe

Async client for high-throughput scenarios.

### Constructor

```python
from raxe import AsyncRaxe

raxe = AsyncRaxe(
    api_key: str | None = None,
    use_ml: bool = True,
    timeout: float = 30.0,
    config_path: str | None = None,
)
```

Same parameters as `Raxe`.

---

### scan()

Async scan of a single prompt.

```python
async def scan(
    self,
    prompt: str,
    *,
    use_ml: bool | None = None,
    timeout: float | None = None,
) -> ScanResult
```

**Example:**

```python
from raxe import AsyncRaxe

async def check_prompt(prompt: str):
    async with AsyncRaxe() as raxe:
        result = await raxe.scan(prompt)
        return result.is_safe
```

---

### scan_batch()

Async batch scanning with concurrency control.

```python
async def scan_batch(
    self,
    prompts: list[str],
    *,
    concurrency: int = 10,
    use_ml: bool | None = None,
    timeout: float | None = None,
) -> list[ScanResult]
```

**Parameters:**

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `prompts` | `list[str]` | required | List of texts to scan |
| `concurrency` | `int` | `10` | Max concurrent scans |
| `use_ml` | `bool \| None` | `None` | Override ML setting |
| `timeout` | `float \| None` | `None` | Override timeout |

**Example:**

```python
from raxe import AsyncRaxe

async def scan_many(prompts: list[str]):
    async with AsyncRaxe() as raxe:
        # Scan up to 20 prompts concurrently
        results = await raxe.scan_batch(
            prompts,
            concurrency=20
        )
        return results
```

---

### close()

Explicitly close the client and flush telemetry.

```python
async def close(self) -> None
```

**Example:**

```python
raxe = AsyncRaxe()
try:
    result = await raxe.scan("Hello")
finally:
    await raxe.close()
```

---

### Context Manager

Recommended usage:

```python
async with AsyncRaxe() as raxe:
    result = await raxe.scan("Hello")
    # Automatically closed and flushed
```

---

## Properties

Both `Raxe` and `AsyncRaxe` expose these properties:

| Property | Type | Description |
|----------|------|-------------|
| `api_key` | `str` | Current API key |
| `use_ml` | `bool` | ML detection enabled |
| `timeout` | `float` | Default timeout |
| `version` | `str` | RAXE version |

**Example:**

```python
raxe = Raxe()
print(f"RAXE version: {raxe.version}")
print(f"ML enabled: {raxe.use_ml}")
```

---

## Thread Safety

- `Raxe` is thread-safe for concurrent scans
- `AsyncRaxe` is safe for concurrent async tasks
- Both clients maintain internal connection pools

```python
import threading
from raxe import Raxe

raxe = Raxe()

def scan_thread(prompt):
    result = raxe.scan(prompt)  # Thread-safe
    return result.is_safe

threads = [
    threading.Thread(target=scan_thread, args=(f"prompt {i}",))
    for i in range(10)
]

for t in threads:
    t.start()
for t in threads:
    t.join()
```
